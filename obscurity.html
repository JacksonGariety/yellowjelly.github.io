<!DOCTYPE html>
<html>
<body>
<h2>Obscurity Score</h2>
<p>Artist - Album</p>
<input id="a"><input id="trash">
<br>
<input id="b"><input id="trash">
<br>
<input id="c"><input id="trash">
<br>
<input id="d"><input id="trash">
<br>
<input id="e"><input id="trash">
<br>
<input id="f"><input id="trash">
<br>
<input id="g"><input id="trash">
<br>
<input id="h"><input id="trash">
<br>
<input id="i"><input id="trash">
<br>
<input id="j"><input id="trash">
<br>
<button type="button" onclick="rawf(); nonrawf();">Calculate!</button>
<p>Raw Obscurity Score: </p><p id="raw"></p>
<p>Obscurity Score: </p><p id="nonraw"></p>
<script>
function rawf() {
    var sum;
    sum = f();
    sum = (sum*100-(sum*100)%1)/100;
    document.getElementById("raw").innerHTML = sum;
}
function nonrawf(){
    var p = f();
    var w = 6.63; //width
    var h = 1; //height
    var d = -0.15; //mode
    var c = Math.log(1/2*(1+Math.exp(1/d)));
    // var y = h*(1-Math.pow(((Math.exp(c)-Math.exp(1/w*1/d*x))/(Math.exp(c)-1)),2))
    // WolframAlpha I love you
    var z1 = (h*(d*Math.exp(1/d)*w*(-4*Math.exp(c-(p/(d*w)))+4*Math.exp(c)+Math.exp((w-2*p)/(d*w))-Math.exp(1/d))+(2-4*Math.exp(c))*p))/(2*(Math.exp(c)-1)*(Math.exp(c)-1))
    var z2 = -h*(d*w*(Math.exp(w/d/w)-Math.exp(0/d/w))*(Math.exp(w/d/w)+Math.exp(0/d/w)-4*Math.exp(c))+w*(4*Math.exp(c)-2)+0*(2-4*Math.exp(c)))/(2*(Math.exp(c)-1)*(Math.exp(c)-1))
    var z = ""+100*(1-z1/z2)-(1000*(1-z1/z2)%1)/10+"%";
    document.getElementById("nonraw").innerHTML = z;
}
function f() {
    var x, text;
    var artists = ["a","b","c","d","e","f","g","h","i","j"];
    var prod = 1;
    for (i=0;i<artists.length;i++){
        x = document.getElementById(artists[i]).value;
        var xhr = new XMLHttpRequest();
        xhr.open("GET", "https://ws.audioscrobbler.com/2.0/?method=artist.getinfo&api_key=c2cc54ab2bedd01c955cbf20cea46416&artist="+x+"&autocorrect=1",false);
        xhr.setRequestHeader('Content-Type', 'text/xml');
        xhr.send();
        xmlDocument = xhr.responseXML;
        text = xmlDocument.getElementsByTagName("listeners")[0].childNodes[0].nodeValue;
        prod = prod*text;
    }
    prod = Math.log10(prod)/10;
    return prod;
}
</script>
</body>
</html> 
